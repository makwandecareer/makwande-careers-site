<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AutoApply — Land more interviews on autopilot</title>

  <!-- SEO -->
  <meta name="description" content="AutoApply helps you revamp your CV, match jobs, and auto-apply — all in one place." />
  <link rel="icon" href="/favicon.ico" />

  <!-- Open Graph -->
  <meta property="og:title" content="AutoApply — Land more interviews on autopilot" />
  <meta property="og:description" content="Revamp CVs, match jobs, and auto-apply with a single click." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="/" />

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

  <style>
    .hero {
      background: radial-gradient(1200px 600px at 10% -10%, rgba(0, 123, 255, 0.08), transparent 60%),
                  radial-gradient(1000px 500px at 90% 10%, rgba(13, 110, 253, 0.06), transparent 60%),
                  linear-gradient(180deg, #ffffff 0%, #f8fafc 60%, #f1f5f9 100%);
    }
    .feature-icon {
      width: 44px; height: 44px; border-radius: 12px;
      display: inline-flex; align-items: center; justify-content: center;
      background: #f1f5f9;
    }
    .badge-soft {
      background: #fff3cd; color: #664d03; border: 1px solid #ffe69c;
    }
    .card-hover:hover { transform: translateY(-2px); transition: transform .15s ease; }
    .footer-link { color: inherit; text-decoration: none; }
    .footer-link:hover { text-decoration: underline; }
  </style>
</head>
<body class="bg-light">

  <!-- Top Nav -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-sm">
    <div class="container">
      <a class="navbar-brand fw-bold" href="/">AutoApply</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMain">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div id="navMain" class="collapse navbar-collapse">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item"><a class="nav-link" href="/jobs.html">Jobs</a></li>
          <li class="nav-item"><a class="nav-link" href="/revamp.html">CV Revamp</a></li>
          <li class="nav-item"><a class="nav-link" href="/pay.html">Subscription</a></li>
          <li class="nav-item"><a class="nav-link" href="/dashboard.html">Dashboard</a></li>
        </ul>
        <div class="d-flex gap-2">
          <a id="btnLogin" href="/login.html" class="btn btn-outline-light">Log in</a>
          <a id="btnSignup" href="/signup.html" class="btn btn-warning text-dark">Sign up</a>
          <button id="btnLogout" class="btn btn-outline-light d-none" type="button">Logout</button>
        </div>
      </div>
    </div>
  </nav>

  <!-- Status banner (populates from /api/health) -->
  <div id="statusBanner" class="py-2 text-center small d-none">
    <span id="statusText" class="badge badge-soft rounded-pill px-3 py-2"></span>
  </div>

  <!-- Hero -->
  <header class="hero border-bottom">
    <div class="container py-5 py-lg-6">
      <div class="row align-items-center g-4">
        <div class="col-lg-7">
          <h1 class="display-5 fw-bold mb-3">Apply to winning jobs — while you sleep.</h1>
          <p class="lead text-secondary mb-4">
            AutoApply revamps your CV to ATS standards, matches the right roles, and auto-applies with tailored cover letters.
          </p>
          <div class="d-flex flex-wrap gap-2">
            <a href="/signup.html" class="btn btn-primary btn-lg">Get started</a>
            <a href="/jobs.html" class="btn btn-outline-primary btn-lg">Browse jobs</a>
          </div>
          <div class="mt-3 text-muted small">
            Soft launch: Gauteng • Western Cape • KZN • + more SADC coming soon
          </div>
        </div>
        <div class="col-lg-5">
          <div class="card shadow-sm border-0">
            <div class="card-body">
              <h5 class="mb-3">Quick health check</h5>
              <div class="d-flex align-items-center justify-content-between">
                <div class="text-muted">API status</div>
                <div id="apiDot" class="ms-3 rounded-circle" style="width:12px;height:12px;background:#adb5bd;"></div>
              </div>
              <div class="mt-2 small text-muted" id="apiInfo">Checking…</div>
              <hr class="my-3" />
              <div class="d-flex align-items-center justify-content-between">
                <div class="text-muted">Login state</div>
                <div id="loginState" class="small">Signed out</div>
              </div>
              <div class="mt-3 d-grid gap-2">
                <a class="btn btn-outline-secondary" href="/login.html">Log in</a>
                <a class="btn btn-primary" href="/signup.html">Create your account</a>
              </div>
            </div>
          </div>
        </div>
      </div><!--/row-->
    </div>
  </header>

  <!-- Features -->
  <section class="container py-5">
    <div class="row g-4">
      <div class="col-md-4">
        <div class="h-100 p-4 bg-white shadow-sm rounded-4 card-hover">
          <div class="feature-icon mb-3"><span class="fw-bold">1</span></div>
          <h5>ATS-optimized CV</h5>
          <p class="text-muted mb-0">Revamp your CV with keywords and structure that pass Applicant Tracking Systems.</p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="h-100 p-4 bg-white shadow-sm rounded-4 card-hover">
          <div class="feature-icon mb-3"><span class="fw-bold">2</span></div>
          <h5>Smart job matching</h5>
          <p class="text-muted mb-0">We rank roles by fit, location, and recency so you focus on high-impact applications.</p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="h-100 p-4 bg-white shadow-sm rounded-4 card-hover">
          <div class="feature-icon mb-3"><span class="fw-bold">3</span></div>
          <h5>Auto-apply engine</h5>
          <p class="text-muted mb-0">One click to send your tailored application — with tracking from submit to interview.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Featured Jobs (from /api/jobs) -->
  <section class="bg-white border-top">
    <div class="container py-5">
      <div class="d-flex align-items-center justify-content-between mb-3">
        <h2 class="h4 m-0">Featured Jobs</h2>
        <a class="btn btn-sm btn-outline-primary" href="/jobs.html">See all</a>
      </div>
      <div id="jobsRow" class="row g-3">
        <div class="col-12"><div class="small text-muted">Loading jobs…</div></div>
      </div>
    </div>
  </section>

  <!-- CTA -->
  <section class="container py-5">
    <div class="p-4 p-md-5 bg-dark text-white rounded-4 shadow-sm">
      <div class="row align-items-center g-3">
        <div class="col-lg-8">
          <h3 class="mb-2">Ready to automate your job hunt?</h3>
          <p class="mb-0 text-white-50">Join now and get your first 10 CV revamps free each month on our launch plan.</p>
        </div>
        <div class="col-lg-4 d-grid">
          <a href="/signup.html" class="btn btn-warning text-dark btn-lg">Create account</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="border-top">
    <div class="container py-4 small d-flex flex-wrap gap-3 justify-content-between">
      <div>© <span id="year"></span> AutoApply • All rights reserved.</div>
      <div class="d-flex gap-3">
        <a class="footer-link" href="/privacy.html">Privacy</a>
        <a class="footer-link" href="/terms.html">Terms</a>
        <a class="footer-link" href="/contact.html">Contact</a>
      </div>
    </div>
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Footer year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Auth UI state
    const btnLogin  = document.getElementById('btnLogin');
    const btnSignup = document.getElementById('btnSignup');
    const btnLogout = document.getElementById('btnLogout');
    const loginState = document.getElementById('loginState');

    function setSignedInUI(signedIn) {
      if (signedIn) {
        btnLogin.classList.add('d-none');
        btnSignup.classList.add('d-none');
        btnLogout.classList.remove('d-none');
        loginState.textContent = "Signed in";
      } else {
        btnLogin.classList.remove('d-none');
        btnSignup.classList.remove('d-none');
        btnLogout.classList.add('d-none');
        loginState.textContent = "Signed out";
      }
    }

    setSignedInUI(!!localStorage.getItem('AA_TOKEN'));

    btnLogout?.addEventListener('click', () => {
      localStorage.removeItem('AA_TOKEN');
      localStorage.removeItem('AA_USER');
      setSignedInUI(false);
      window.location.href = '/login.html';
    });

    // Status banner + API health check
    const statusBanner = document.getElementById('statusBanner');
    const statusText   = document.getElementById('statusText');
    const apiDot       = document.getElementById('apiDot');
    const apiInfo      = document.getElementById('apiInfo');

    async function checkHealth() {
      try {
        const res = await fetch('/api/health'); // same-origin via Render rewrite
        const data = await res.json();
        apiDot.style.background = '#198754'; // green
        apiInfo.textContent = `OK • ${data.service} v${data.version}`;
        statusText.textContent = 'API connected';
        statusBanner.classList.remove('d-none');
      } catch (e) {
        apiDot.style.background = '#dc3545'; // red
        apiInfo.textContent = 'API unreachable';
        statusText.textContent = 'API: not reachable';
        statusBanner.classList.remove('d-none');
      }
    }

    // Featured jobs
    const jobsRow = document.getElementById('jobsRow');
    async function loadJobs() {
      try {
        const res = await fetch('/api/jobs');
        const jobs = await res.json();
        if (!Array.isArray(jobs) || jobs.length === 0) {
          jobsRow.innerHTML = '<div class="col-12"><div class="alert alert-info mb-0">No jobs available right now.</div></div>';
          return;
        }

        jobsRow.innerHTML = '';
        jobs.slice(0, 6).forEach(j => {
          const col = document.createElement('div');
          col.className = 'col-md-4';
          col.innerHTML = `
            <div class="card h-100 shadow-sm border-0 rounded-4 card-hover">
              <div class="card-body">
                <h5 class="card-title mb-1">${j.title}</h5>
                <div class="text-muted">${j.company} • ${j.location}</div>
                <div class="mt-2 small">Match score: <strong>${(j.match_score*100).toFixed(0)}%</strong></div>
                <div class="small text-muted mt-1">Posted: ${j.post_advertised_date || '-'} • Closes: ${j.closing_date || '-'}</div>
              </div>
              <div class="card-footer bg-transparent border-0 d-grid">
                <a href="/jobs.html" class="btn btn-outline-primary">Apply</a>
              </div>
            </div>`;
          jobsRow.appendChild(col);
        });
      } catch (e) {
        jobsRow.innerHTML = '<div class="col-12"><div class="alert alert-warning mb-0">Couldn’t load jobs. Please try again later.</div></div>';
      }
    }

    // Init
    checkHealth();
    loadJobs();
  </script>
</body>
</html>





