<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Live Jobs | AutoApply</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      margin: 0;
    }

    header {
      background: #003366;
      color: white;
      padding: 1rem;
      text-align: center;
    }

    #filters {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin: 1rem;
    }

    select, input {
      padding: 0.5rem;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    .job-card {
      background: white;
      padding: 1rem;
      margin: 1rem auto;
      width: 80%;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .job-card h3 {
      margin: 0 0 0.3rem 0;
    }

    .job-card p {
      margin: 0.3rem 0;
    }

    .btn {
      background: #003366;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 0.5rem;
    }

    .btn:hover {
      background: #0055aa;
    }
  </style>
</head>
<body>

<header>
  <h1>Live Jobs Matching Your Profile</h1>
  <p>Use filters to find the right match</p>
</header>

<div id="filters">
  <input type="text" id="searchQuery" placeholder="Job keyword (e.g. Engineer)" />
  <select id="country">
    <option value="south_africa">South Africa</option>
    <option value="namibia">Namibia</option>
    <option value="botswana">Botswana</option>
    <option value="zimbabwe">Zimbabwe</option>
    <option value="lesotho">Lesotho</option>
    <option value="eswatini">Eswatini</option>
    <option value="zambia">Zambia</option>
    <option value="malawi">Malawi</option>
    <option value="mozambique">Mozambique</option>
    <option value="dr_congo">DR Congo</option>
  </select>
  <button class="btn" onclick="scrapeJobs()">Find Jobs</button>
</div>


<div id="jobList"></div>

<script>
  let allJobs = [];

  async function scrapeJobs() {
    const query = document.getElementById("searchQuery").value;
    const country = document.getElementById("country").value;

    const response = await fetch(`https://autoapply-backend.onrender.com/api/scrape_jobs?query=${encodeURIComponent(query)}&country=${country}`);
    const data = await response.json();
    allJobs = data;
    renderJobs(data);
  }

  function renderJobs(jobs) {
    const jobList = document.getElementById("jobList");
    jobList.innerHTML = "";

    if (!jobs.length) {
      jobList.innerHTML = "<p style='text-align:center;'>No jobs found. Try a different keyword.</p>";
      return;
    }

    jobs.forEach(job => {
      const card = document.createElement("div");
      card.className = "job-card";
      card.innerHTML = `
        <h3>${job.title}</h3>
        <p><strong>Company:</strong> ${job.company}</p>
        <p><strong>Location:</strong> ${job.location}</p>
        <p><strong>Source:</strong> ${job.source}</p>
        <a href="${job.link}" target="_blank" class="btn">View Job</a>
        <button class="btn" onclick='useJob(${JSON.stringify(job)})'>Use This Job</button>
      `;
      jobList.appendChild(card);
    });
  }

  function useJob(job) {
    // Store job to localStorage or send to CV revamp next step
    localStorage.setItem("selectedJob", JSON.stringify(job));
    alert("Job saved! Proceed to CV Revamp.");
    window.location.href = "revamp.html";
  }
</script>
<footer style="margin-top:3rem; padding:1rem; background:#003366; color:white; text-align:center;">
  <p>&copy; 2025 AutoApply by Makwande Careers | <a href="mailto:admin@makwandecareer.co.za" style="color:#FFD700;">Contact Us</a></p>
  <p>üìç Powered by AI | Protected under POPIA | No data shared with current employers</p>
</footer>
<footer style="margin-top:3rem; padding:1rem; background:#003366; color:white; text-align:center;">
  <p>&copy; 2025 AutoApply by Makwande Careers | <a href="mailto:admin@makwandecareer.co.za" style="color:#FFD700;">Contact Us</a></p>
  <p>üìç Powered by AI | Protected under POPIA | No data shared with current employers</p>
</footer>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="description" content="Auto Apply App helps you get hired faster with AI CV revamps, automatic job applications, and cover letters." />
<meta name="author" content="Makwande Careers" />
<meta name="robots" content="index, follow" />

<!-- Open Graph -->
<meta property="og:title" content="Auto Apply App ‚Äì Get Hired Smarter" />
<meta property="og:description" content="Automate your job applications with AI-powered CVs and cover letters." />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://autoapplyapp.vercel.app" />
<meta property="og:image" content="https://autoapplyapp.vercel.app/logo.png" />
</body>
</html>




