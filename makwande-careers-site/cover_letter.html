<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="assets/css/app.css">

  <meta charset="UTF-8">
  <title>Cover Letter Generator | Makwande Careers</title>
  <link rel="stylesheet" href="assets/css/app.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <nav class="navbar navbar-expand-lg fixed-top bg-white shadow-sm">
    <div class="container">
      <a class="navbar-brand" href="index.html">Makwande Careers</a>
      <div class="collapse navbar-collapse">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a href="jobs.html" class="nav-link">Jobs</a></li>
          <li class="nav-item"><a href="cv-revamp.html" class="nav-link">CV Revamp</a></li>
          <li class="nav-item"><a href="cover-letter.html" class="nav-link active">Cover Letter</a></li>
          <li class="nav-item"><a href="dashboard.html" class="nav-link">Dashboard</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <main class="container py-5" style="margin-top:5rem;">
    <h2 class="mb-4">AI Cover Letter Generator</h2>
    <p class="lead">Generate a tailored cover letter for your target job.</p>

    <form id="coverForm" class="card p-4">
      <div class="mb-3">
        <label class="form-label">Job Title</label>
        <input type="text" class="form-control" id="jobTitle" required>
      </div>
      <div class="mb-3">
        <label class="form-label">Company</label>
        <input type="text" class="form-control" id="company" required>
      </div>
      <div class="mb-3">
        <label class="form-label">Job Description</label>
        <textarea class="form-control" id="jobDesc" rows="4" required></textarea>
      </div>
      <button type="submit" class="btn btn-primary">Generate Cover Letter</button>
    </form>

    <div id="coverResult" class="mt-4"></div>
  </main>

  <footer class="text-center py-4">
    <p>&copy; 2025 Makwande Careers</p>
  </footer>

  <script>
    document.getElementById("coverForm").addEventListener("submit",(e)=>{
      e.preventDefault();
      const resultBox=document.getElementById("coverResult");
      resultBox.innerHTML="<div class='alert alert-info'>Generating cover letter...</div>";
      setTimeout(()=>{resultBox.innerHTML="<div class='alert alert-success'><h5>✅ Cover Letter Generated</h5><p>Dear Hiring Manager, ...</p></div>";},2000);
    });
  </script>
    <footer class="bg-dark text-light text-center py-4 mt-5">
      <div class="container">
        <p class="mb-1">&copy; <span id="year"></span> Makwande Careers. All rights reserved.</p>
        <p class="small">
          Empowering Africa’s professionals with smarter job applications, bursaries, and career growth.
        </p>
      </div>
    </footer>
    <script>
      // ====== BASIC API CLIENT (paste once per page that needs API) ======
      window.API_BASE = "https://autoapplyapp-mobile.onrender.com";  // FastAPI base
      const TOKEN_KEY = "mc_token";
      
      // Auth helpers
      function setToken(t){ localStorage.setItem(TOKEN_KEY, t); }
      function getToken(){ return localStorage.getItem(TOKEN_KEY); }
      function authHeaders(h={}) {
        const t = getToken();
        return t ? {...h, Authorization: `Bearer ${t}`} : h;
      }
      
      // API helper (GET/POST/etc)
      async function api(path, {method="GET", body, headers} = {}) {
        const res = await fetch(`${API_BASE}${path}`, {
          method,
          headers: authHeaders({
            "Content-Type": "application/json",
            ...(headers||{})
          }),
          body: body ? JSON.stringify(body) : undefined
        });
        if (!res.ok) throw new Error(await res.text());
        return res.status === 204 ? null : res.json();
      }
      </script>
      
</body>
<div class="container my-5">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="card shadow-lg border-0 rounded-3">
        <div class="card-body p-4">
          <h3 class="card-title text-center mb-4">Generate a Cover Letter</h3>
          
          <form id="coverLetterForm">
            
            <!-- Applicant Name -->
            <div class="mb-3">
              <label for="applicant_name" class="form-label">Your Name</label>
              <input type="text" class="form-control" id="applicant_name" name="applicant_name" placeholder="e.g., Makwande Gcora" required>
            </div>

            <!-- Company Name -->
            <div class="mb-3">
              <label for="company" class="form-label">Company Name</label>
              <input type="text" class="form-control" id="company" name="company" placeholder="e.g., Progressive Liquor" required>
            </div>

            <!-- Role -->
            <div class="mb-3">
              <label for="role" class="form-label">Job Role</label>
              <input type="text" class="form-control" id="role" name="role" placeholder="e.g., Process Engineer" required>
            </div>

            <!-- Job Description -->
            <div class="mb-3">
              <label for="cl_job_description" class="form-label">Job Description</label>
              <textarea class="form-control" id="cl_job_description" name="cl_job_description" rows="5" placeholder="Paste the job description here..." required></textarea>
            </div>

            <!-- CV Text -->
            <div class="mb-3">
              <label for="cl_cv_text" class="form-label">Your CV (Plain Text)</label>
              <textarea class="form-control" id="cl_cv_text" name="cl_cv_text" rows="10" placeholder="Paste your CV here..." required></textarea>
            </div>

            <!-- Tone -->
            <div class="mb-3">
              <label for="tone" class="form-label">Tone</label>
              <select class="form-select" id="tone" name="tone">
                <option value="professional" selected>Professional</option>
                <option value="enthusiastic">Enthusiastic</option>
                <option value="concise">Concise</option>
                <option value="warm">Warm</option>
              </select>
            </div>

            <!-- Submit button -->
            <div class="d-grid">
              <button type="submit" class="btn btn-success btn-lg">Generate Cover Letter</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Results -->
      <div id="coverLetterResults" class="mt-4" style="display:none;">
        <div class="card shadow border-0">
          <div class="card-body">
            <h4 class="mb-3">Your Cover Letter</h4>
            <pre id="cover_letter_output" style="white-space: pre-wrap; font-family: inherit;"></pre>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
document.getElementById('coverLetterForm').addEventListener('submit', async (e) => {
  e.preventDefault();

  const payload = {
    applicant_name: document.getElementById('applicant_name').value,
    company: document.getElementById('company').value,
    role: document.getElementById('role').value,
    job_description: document.getElementById('cl_job_description').value,
    cv_text: document.getElementById('cl_cv_text').value,
    tone: document.getElementById('tone').value
  };

  const res = await fetch('/api/cover_letter', {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify(payload)
  });

  const data = await res.json();
  if (!res.ok) {
    alert(data.detail || 'Something went wrong.');
    return;
  }

  // Display cover letter
  document.getElementById('coverLetterResults').style.display = 'block';
  document.getElementById('cover_letter_output').textContent = data.letter_markdown;
});
</script>

</html>
<footer class="bg-dark text-light text-center py-4 mt-5">
  <div class="container">
    <p class="mb-1">&copy; <span id="year"></span> Makwande Careers. All rights reserved.</p>
    <p class="small">
      Empowering Africa’s professionals with smarter job applications, bursaries, and career growth.
    </p>
  </div>
</footer>




